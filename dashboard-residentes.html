<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conecta+ App Residente (Final)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class', // Habilitar dark mode
            theme: {
                extend: {
                    colors: {
                        'primary': '#2196F3',
                        'primary-dark': '#1976D2',
                        'positive': '#4CAF50',
                        'negative': '#F44336',
                        'warning': '#FFC107',
                        // Light Mode Colors
                        'background': '#F4F7FC',
                        'surface': '#FFFFFF',
                        'on-surface': '#1A202C',
                        'on-surface-variant': '#4A5568',
                        // Dark Mode Colors
                        'dark-background': '#121212',
                        'dark-surface': '#1E1E1E',
                        'dark-on-surface': '#E0E0E0',
                        'dark-on-surface-variant': '#A0A0A0',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .mobile-frame {
            width: 100%;
            max-width: 420px;
            height: 90vh;
            max-height: 900px;
            border-radius: 36px;
            box-shadow: 0 20px 50px -10px rgba(0,0,0,0.2), 0 0 0 10px #1f2937;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        .screen { display: none; height: 100%; flex-direction: column; }
        .screen.active { display: flex; }
        .screen-content { flex-grow: 1; overflow-y: auto; padding: 24px; }
        .screen-content::-webkit-scrollbar { display: none; }
        .title-text { font-size: 22px; font-weight: 700; }
        .subtitle-text { font-size: 18px; font-weight: 600; }
        .body-text { font-size: 16px; font-weight: 500; }
        .caption-text { font-size: 14px; font-weight: 400; }
        .tab-button.active svg { color: #2196F3; }
        .tab-button.active span { color: #2196F3; font-weight: 600; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; }
        .calendar-day { width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; cursor: pointer; }
        .calendar-day.today { background-color: #E3F2FD; color: #1976D2; }
        .dark .calendar-day.today { background-color: #1976D2; color: #E3F2FD; }
        .calendar-day.selected { background-color: #2196F3; color: white; }
        .calendar-day.disabled { color: #BDBDBD; cursor: not-allowed; }
        .dark .calendar-day.disabled { color: #4A5568; }
        .time-slot.selected { background-color: #2196F3; color: white; border-color: #2196F3; }
    </style>
</head>
<body class="bg-gray-800 flex items-center justify-center min-h-screen p-4">

    <div id="mobile-frame" class="mobile-frame bg-background dark:bg-dark-background">
        
        <div id="login-screen" class="screen active bg-cover bg-center" style="background-image: linear-gradient(to top, rgba(0,0,0,0.6), rgba(0,0,0,0.2)), url('https://images.unsplash.com/photo-1580587771525-78b9dba3b914?q=80&w=1974&auto=format&fit=crop');">
            <div class="flex flex-col justify-end h-full p-8 text-white">
                <h1 class="text-4xl font-bold mb-2">Conecta+</h1>
                <p class="text-lg mb-8">La vida en tu condominio, simplificada.</p>
                <form id="login-form" class="space-y-4">
                    <input type="email" placeholder="Correo electrónico" class="w-full p-4 rounded-xl bg-white/20 placeholder-white/70 border border-white/30 focus:outline-none focus:ring-2 focus:ring-primary" value="carlos.guzman@email.com">
                    <input type="password" placeholder="Contraseña" class="w-full p-4 rounded-xl bg-white/20 placeholder-white/70 border border-white/30 focus:outline-none focus:ring-2 focus:ring-primary" value="••••••••">
                    <button type="submit" class="w-full bg-primary text-white font-bold py-4 rounded-xl hover:bg-primary-dark transition-all shadow-lg text-lg">
                        Iniciar Sesión
                    </button>
                    <a href="#" class="block text-center text-sm text-white/80 mt-4 hover:text-white">¿Olvidaste tu contraseña?</a>
                </form>
            </div>
        </div>

        <div id="app-screen" class="screen">
            <header id="app-header" class="p-4 flex justify-between items-center bg-surface dark:bg-dark-surface border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10">
                </header>
            
            <main id="main-content" class="screen-content bg-background dark:bg-dark-background">
                </main>

            <nav id="app-nav" class="bg-surface dark:bg-dark-surface border-t border-gray-200 dark:border-gray-700 p-2 shadow-inner mt-auto sticky bottom-0 z-10 flex justify-around items-center">
                <button data-target="inicio" class="tab-button p-2 text-center text-on-surface-variant dark:text-dark-on-surface-variant active">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mx-auto" viewBox="0 0 20 20" fill="currentColor"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" /></svg>
                    <span class="text-xs">Inicio</span>
                </button>
                <button data-target="comunidad" class="tab-button p-2 text-center text-on-surface-variant dark:text-dark-on-surface-variant">
                     <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
                        <span class="text-xs">Comunidad</span>
                </button>
                <button data-target="reservar" class="tab-button p-2 text-center text-on-surface-variant dark:text-dark-on-surface-variant">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                    <span class="text-xs">Reservar</span>
                </button>
                <button data-target="accesos" class="tab-button p-2 text-center text-on-surface-variant dark:text-dark-on-surface-variant">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" /></svg>
                    <span class="text-xs">Accesos</span>
                </button>
                <button data-target="perfil" class="tab-button p-2 text-center text-on-surface-variant dark:text-dark-on-surface-variant">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                    <span class="text-xs">Perfil</span>
                </button>
            </nav>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mobileFrame = document.getElementById('mobile-frame');
            const loginForm = document.getElementById('login-form');
            const loginScreen = document.getElementById('login-screen');
            const appScreen = document.getElementById('app-screen');
            const tabButtons = document.querySelectorAll('.tab-button');
            const appHeader = document.getElementById('app-header');
            const mainContent = document.getElementById('main-content');
            const appNav = document.getElementById('app-nav');

            let navigationHistory = ['inicio'];
            let calendarDate = new Date();
            let navigationTimeoutId = null;

            const screenContents = {
                inicio: {
                    isMainTab: true,
                    header: () => `
                        <div class="text-on-surface dark:text-dark-on-surface">
                            <h1 class="title-text">Carlos Guzmán</h1>
                            <p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">Departamento 101</p>
                        </div>
                        <div class="w-12 h-12 bg-gray-200 rounded-full bg-cover" style="background-image: url('https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?q=80&w=1780&auto=format&fit=crop')"></div>
                    `,
                    content: () => `
                        <div class="space-y-6">
                            <section class="bg-surface dark:bg-dark-surface p-5 rounded-2xl shadow-lg border border-negative">
                                <div class="flex justify-between items-start">
                                    <div><p class="subtitle-text text-negative font-semibold">Adeudo Pendiente</p><p class="text-4xl font-extrabold text-on-surface dark:text-dark-on-surface mt-1">$1,550.00</p></div>
                                    <div class="w-8 h-8 flex items-center justify-center bg-negative/10 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-negative" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.21 3.03-1.742 3.03H4.42c-1.532 0-2.492-1.696-1.742-3.03l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1.75-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z" clip-rule="evenodd" /></svg></div>
                                </div>
                                <button data-target="pago" class="navigate-button mt-4 w-full bg-primary text-white font-bold py-3 rounded-xl hover:bg-primary-dark transition-all shadow-md text-base">Pagar Ahora</button>
                            </section>
                            <section>
                                <h2 class="subtitle-text text-on-surface dark:text-dark-on-surface mb-3">Anuncios Recientes</h2>
                                <div class="space-y-3">
                                    <div class="bg-surface dark:bg-dark-surface p-4 rounded-2xl shadow-sm"><p class="body-text text-on-surface dark:text-dark-on-surface">Corte de Agua Programado</p><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant mt-1">Se suspenderá el servicio el día de mañana de 9am a 1pm...</p></div>
                                    <div class="bg-surface dark:bg-dark-surface p-4 rounded-2xl shadow-sm"><p class="body-text text-on-surface dark:text-dark-on-surface">Jornada de Fumigación</p><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant mt-1">Este sábado se realizará la fumigación de áreas comunes...</p></div>
                                </div>
                            </section>
                        </div>
                    `
                },
                comunidad: {
                    isMainTab: true,
                    header: () => `<h1 class="title-text text-on-surface dark:text-dark-on-surface">Comunidad</h1>`,
                    content: () => `
                        <div class="space-y-3">
                            <button data-target="votaciones" class="navigate-button w-full text-left bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm flex items-center justify-between"><span class="body-text font-semibold text-on-surface dark:text-dark-on-surface">Votaciones en Línea</span><span class="bg-warning text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">1</span></button>
                            <button data-target="formularioReporte" class="navigate-button w-full text-left bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm flex items-center justify-between"><span class="body-text font-semibold text-on-surface dark:text-dark-on-surface">Levantar un Reporte</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                            <button data-target="decalogo" class="navigate-button w-full text-left bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm flex items-center justify-between"><span class="body-text font-semibold text-on-surface dark:text-dark-on-surface">Decálogo del Buen Vecino</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                            <button data-target="blog" class="navigate-button w-full text-left bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm flex items-center justify-between"><span class="body-text font-semibold text-on-surface dark:text-dark-on-surface">Blog Comunitario</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                        </div>
                    `
                },
                accesos: {
                    isMainTab: true,
                    header: () => `<h1 class="title-text text-on-surface dark:text-dark-on-surface">Control de Accesos</h1>`,
                    content: () => `
                        <div class="space-y-6">
                            <section class="text-center bg-surface dark:bg-dark-surface p-6 rounded-2xl shadow-md">
                                <p class="body-text text-on-surface-variant dark:text-dark-on-surface-variant mb-4">Genera un código QR para tus visitas. Es seguro, fácil y rápido.</p>
                                <div class="bg-white inline-block p-4 rounded-2xl shadow-inner">
                                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=Visita-CarlosGuzman-Depto101-Jul-08-2025" alt="Código QR de ejemplo">
                                </div>
                                <button data-target="compartirQR" class="navigate-button mt-6 w-full max-w-xs mx-auto bg-primary text-white font-bold py-3 rounded-xl hover:bg-primary-dark transition-all">Compartir QR</button>
                            </section>
                             <section>
                                <h2 class="subtitle-text text-on-surface dark:text-dark-on-surface mb-3">Accesos Recientes</h2>
                                <div class="space-y-3">
                                    <div class="bg-surface dark:bg-dark-surface p-3 rounded-xl shadow-sm"><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">QR para <span class="font-semibold text-on-surface dark:text-dark-on-surface">"Juan Pérez"</span>. Generado hoy a las 11:45 AM.</p></div>
                                    <div class="bg-surface dark:bg-dark-surface p-3 rounded-xl shadow-sm"><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">Paquete de <span class="font-semibold text-on-surface dark:text-dark-on-surface">Mercado Libre</span> recibido. Recoger en recepción.</p></div>
                                </div>
                            </section>
                        </div>
                    `
                },
                perfil: {
                    isMainTab: true,
                    header: () => `<h1 class="title-text text-on-surface dark:text-dark-on-surface">Mi Perfil</h1>`,
                    content: () => `
                        <div class="space-y-6">
                            <div class="flex flex-col items-center"><div class="w-24 h-24 bg-gray-200 rounded-full mb-4 bg-cover" style="background-image: url('https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?q=80&w=1780&auto=format&fit=crop')"></div><p class="title-text text-on-surface dark:text-dark-on-surface">Carlos Guzmán</p><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">carlos.guzman@email.com</p></div>
                            <div class="bg-surface dark:bg-dark-surface rounded-xl shadow-sm">
                                <button data-target="infoPersonal" class="navigate-button w-full flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700"><span class="body-text text-on-surface dark:text-dark-on-surface">Información Personal</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                                <button data-target="historialPagos" class="navigate-button w-full flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700"><span class="body-text text-on-surface dark:text-dark-on-surface">Historial de Pagos</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                                <button data-target="configuracion" class="navigate-button w-full flex items-center justify-between p-4"><span class="body-text text-on-surface dark:text-dark-on-surface">Configuración</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                            </div>
                            <button id="logout-button" class="w-full bg-negative/10 text-negative font-bold py-3 rounded-xl hover:bg-negative/20 transition-all">Cerrar Sesión</button>
                        </div>
                    `
                },
                pago: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Realizar Pago</h1><div class="w-6"></div>`,
                    content: () => `
                        <div class="space-y-4">
                            <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm"><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">Concepto</p><p class="body-text font-semibold text-on-surface dark:text-dark-on-surface">Mantenimiento Julio 2025</p></div>
                            <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm"><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">Monto a Pagar</p><p class="body-text font-semibold text-primary">$1,550.00 MXN</p></div>
                            <h2 class="subtitle-text pt-4 text-on-surface dark:text-dark-on-surface">Selecciona un método de pago</h2>
                            <div class="space-y-3">
                                <button data-target="pagoTarjeta" class="navigate-button w-full text-left bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm flex items-center justify-between"><span class="body-text text-on-surface dark:text-dark-on-surface">Tarjeta de Crédito/Débito</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                                <button data-target="pagoOXXO" class="navigate-button w-full text-left bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm flex items-center justify-between"><span class="body-text text-on-surface dark:text-dark-on-surface">Pago en OXXO</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                                <button data-target="pagoSPEI" class="navigate-button w-full text-left bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm flex items-center justify-between"><span class="body-text text-on-surface dark:text-dark-on-surface">Transferencia SPEI</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                            </div>
                        </div>
                    `
                },
                reservar: {
                    isMainTab: true,
                    header: () => `<h1 class="title-text text-on-surface dark:text-dark-on-surface">Reservar Amenidades</h1>`,
                    content: () => `
                        <div class="space-y-6">
                            <div>
                                <label for="amenity-select" class="subtitle-text text-on-surface dark:text-dark-on-surface mb-2 block">1. Elige la amenidad</label>
                                <select id="amenity-select" class="w-full p-3 body-text border border-gray-300 dark:border-gray-600 rounded-xl bg-surface dark:bg-dark-surface text-on-surface dark:text-dark-on-surface focus:ring-2 focus:ring-primary">
                                    <option>Salón de Usos Múltiples</option>
                                    <option>Asador Terraza A</option>
                                    <option>Asador Terraza B</option>
                                    <option>Cancha de Pádel</option>
                                </select>
                            </div>
                            <div>
                                <label class="subtitle-text text-on-surface dark:text-dark-on-surface mb-2 block">2. Selecciona la fecha</label>
                                <div id="calendar-container" class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm text-on-surface dark:text-dark-on-surface"></div>
                            </div>
                            <div id="time-slot-container" class="hidden">
                                <label class="subtitle-text text-on-surface dark:text-dark-on-surface mb-2 block">3. Elige un horario</label>
                                <div id="time-slots" class="grid grid-cols-3 gap-2">
                                    <button class="time-slot p-2 border rounded-lg border-gray-300 dark:border-gray-600 text-on-surface dark:text-dark-on-surface">10:00 - 12:00</button>
                                    <button class="time-slot p-2 border rounded-lg border-gray-300 dark:border-gray-600 text-on-surface dark:text-dark-on-surface">12:00 - 14:00</button>
                                    <button class="time-slot p-2 border rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed" disabled>14:00 - 16:00</button>
                                    <button class="time-slot p-2 border rounded-lg border-gray-300 dark:border-gray-600 text-on-surface dark:text-dark-on-surface">16:00 - 18:00</button>
                                    <button class="time-slot p-2 border rounded-lg border-gray-300 dark:border-gray-600 text-on-surface dark:text-dark-on-surface">18:00 - 20:00</button>
                                </div>
                            </div>
                            <button data-target="reservaConfirmada" class="navigate-button w-full bg-positive text-white font-bold py-3 rounded-xl hover:bg-green-600 transition-all shadow-lg">Confirmar Reservación</button>
                        </div>
                    `
                },
                 votaciones: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Votaciones</h1><div class="w-6"></div>`,
                    content: () => `
                        <div class="space-y-6">
                            <section>
                                <h2 class="subtitle-text text-on-surface dark:text-dark-on-surface mb-3">Votaciones Abiertas</h2>
                                <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm space-y-4">
                                    <div>
                                        <div class="flex justify-between items-center"><p class="body-text font-semibold text-on-surface dark:text-dark-on-surface">Elección de nuevo color para la fachada</p><span class="text-xs font-bold text-white bg-positive px-2 py-1 rounded-full">Abierta</span></div>
                                        <p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant mt-1">Fecha de cierre: 15 de Julio</p>
                                        <button data-target="votarAhora" class="navigate-button mt-3 w-full bg-primary text-white font-bold py-2 rounded-lg hover:bg-primary-dark transition-all">Votar Ahora</button>
                                    </div>
                                </div>
                            </section>
                            <section>
                                <h2 class="subtitle-text text-on-surface dark:text-dark-on-surface mb-3">Votaciones Cerradas</h2>
                                 <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm space-y-4">
                                    <div>
                                        <div class="flex justify-between items-center"><p class="body-text font-semibold text-on-surface dark:text-dark-on-surface">Aprobación de cuota extraordinaria</p><span class="text-xs font-bold text-white bg-gray-500 px-2 py-1 rounded-full">Cerrada</span></div>
                                        <p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant mt-1">Cerró el 30 de Junio</p>
                                        <button data-target="verResultados" class="navigate-button mt-3 w-full bg-gray-200 dark:bg-gray-700 text-on-surface dark:text-dark-on-surface font-bold py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-all">Ver Resultados</button>
                                    </div>
                                </div>
                            </section>
                        </div>
                    `
                },
                votarAhora: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Votar</h1><div class="w-6"></div>`,
                    content: () => `
                        <div class="space-y-4">
                            <h2 class="subtitle-text text-on-surface dark:text-dark-on-surface">Elección de nuevo color para la fachada</h2>
                            <p class="body-text text-on-surface-variant dark:text-dark-on-surface-variant">Se somete a votación la elección del nuevo color para pintar las fachadas de ambas torres. El presupuesto ya ha sido aprobado.</p>
                            <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm space-y-3 divide-y divide-gray-200 dark:divide-gray-700">
                                <div class="flex items-center pt-2"><input type="radio" name="vote" class="h-4 w-4 text-primary focus:ring-primary border-gray-300"><label class="ml-3 body-text text-on-surface dark:text-dark-on-surface">Opción A: Blanco Ostión</label></div>
                                <div class="flex items-center pt-3"><input type="radio" name="vote" class="h-4 w-4 text-primary focus:ring-primary border-gray-300"><label class="ml-3 body-text text-on-surface dark:text-dark-on-surface">Opción B: Gris Acero</label></div>
                                <div class="flex items-center pt-3"><input type="radio" name="vote" class="h-4 w-4 text-primary focus:ring-primary border-gray-300"><label class="ml-3 body-text text-on-surface dark:text-dark-on-surface">Opción C: Beige Arena</label></div>
                            </div>
                            <button data-target="votoConfirmado" class="navigate-button w-full bg-positive text-white font-bold py-3 rounded-xl hover:bg-green-600 transition-all shadow-lg">Emitir Voto</button>
                        </div>
                    `
                },
                 votoConfirmado: {
                    header: (from) => `<button data-target="comunidad" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">¡Gracias!</h1><div class="w-6"></div>`,
                    content: () => `
                        <div class="text-center flex flex-col items-center justify-center h-full">
                             <div class="w-24 h-24 flex items-center justify-center bg-positive/10 rounded-full mb-6">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-positive" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            </div>
                            <h2 class="text-2xl font-bold text-on-surface dark:text-dark-on-surface">Tu voto ha sido registrado</h2>
                             <p class="body-text text-on-surface-variant dark:text-dark-on-surface-variant mt-2">Los resultados se publicarán al cierre de la votación.</p>
                            <button data-target="comunidad" class="navigate-button mt-8 w-full max-w-xs mx-auto bg-primary text-white font-bold py-3 rounded-xl hover:bg-primary-dark transition-all">Volver a Comunidad</button>
                        </div>
                    `
                },
                 verResultados: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Resultados</h1><div class="w-6"></div>`,
                    content: () => `
                        <div class="space-y-4">
                            <h2 class="subtitle-text text-on-surface dark:text-dark-on-surface">Aprobación de cuota extraordinaria</h2>
                            <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm space-y-4">
                                <div><p class="body-text text-on-surface dark:text-dark-on-surface mb-1">A favor (75%)</p><div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4"><div class="bg-positive h-4 rounded-full" style="width: 75%"></div></div></div>
                                <div><p class="body-text text-on-surface dark:text-dark-on-surface mb-1">En contra (25%)</p><div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4"><div class="bg-negative h-4 rounded-full" style="width: 25%"></div></div></div>
                                <div class="pt-2"><p class="body-text font-bold text-on-surface dark:text-dark-on-surface">Resultado: <span class="text-positive">Aprobado</span></p></div>
                            </div>
                        </div>
                    `
                },
                // ... (Otras pantallas existentes)
                configuracion: {
                     header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Configuración</h1><div class="w-6"></div>`,
                     content: () => `
                        <div class="bg-surface dark:bg-dark-surface rounded-xl shadow-sm divide-y divide-gray-200 dark:divide-gray-700">
                           <div class="flex justify-between items-center p-4">
                                <span class="body-text text-on-surface dark:text-dark-on-surface">Modo Oscuro</span>
                                <input type="checkbox" id="dark-mode-toggle" class="toggle-checkbox">
                           </div>
                           <button data-target="notificacionesSettings" class="navigate-button w-full flex items-center justify-between p-4"><span class="body-text text-on-surface dark:text-dark-on-surface">Notificaciones</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                        </div>
                        <style>.toggle-checkbox { height: 1.5rem; width: 2.75rem; appearance: none; background-color: #d1d5db; border-radius: 9999px; position: relative; transition: background-color 0.2s ease-in-out; cursor: pointer; } .dark .toggle-checkbox { background-color: #4A5568; } .toggle-checkbox:checked { background-color: #2196F3; } .toggle-checkbox::before { content: ''; position: absolute; top: 0.125rem; left: 0.125rem; height: 1.25rem; width: 1.25rem; background-color: white; border-radius: 9999px; transition: transform 0.2s ease-in-out; } .toggle-checkbox:checked::before { transform: translateX(1.25rem); }</style>
                     `
                },
                 pagoTarjeta: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Pago con Tarjeta</h1><div class="w-6"></div>`,
                    content: () => `<p class="text-center p-8 text-on-surface-variant dark:text-dark-on-surface-variant">Aquí iría el formulario para ingresar los datos de la tarjeta de crédito/débito.</p>`
                },
                pagoOXXO: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Pago en OXXO</h1><div class="w-6"></div>`,
                    content: () => `
                        <div class="text-center space-y-4 bg-surface dark:bg-dark-surface p-6 rounded-2xl shadow-lg">
                            <p class="body-text text-on-surface dark:text-dark-on-surface">Muestra este código de barras en cualquier tienda OXXO para realizar tu pago.</p>
                            <img src="https://barcode.tec-it.com/barcode.ashx?data=98765432109876543210&code=Code128&dpi=96" alt="Código de barras OXXO" class="mx-auto">
                            <div class="pt-4">
                                <p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">Referencia:</p>
                                <p class="text-2xl font-mono tracking-widest text-on-surface dark:text-dark-on-surface">9876 5432 1098</p>
                            </div>
                            <p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant pt-2">El pago puede tardar hasta 48 horas en reflejarse.</p>
                        </div>
                    `
                },
                pagoSPEI: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Transferencia SPEI</h1><div class="w-6"></div>`,
                    content: () => `
                        <div class="space-y-6">
                            <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm">
                                <p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">CLABE</p>
                                <div class="flex items-center justify-between mt-1">
                                    <p id="clabe" class="text-lg font-mono text-on-surface dark:text-dark-on-surface">1234 5678 9012 3456 78</p>
                                    <button data-copy="clabe" class="copy-button p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-on-surface-variant dark:text-dark-on-surface-variant" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg></button>
                                </div>
                            </div>
                            <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm">
                                <p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">Referencia Numérica (Concepto)</p>
                                <div class="flex items-center justify-between mt-1">
                                    <p id="referencia" class="text-lg font-mono text-on-surface dark:text-dark-on-surface">1011550</p>
                                    <button data-copy="referencia" class="copy-button p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-on-surface-variant dark:text-dark-on-surface-variant" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg></button>
                                </div>
                            </div>
                            <div>
                                <h3 class="subtitle-text text-on-surface dark:text-dark-on-surface mb-2">Sube tu comprobante</h3>
                                <label for="comprobante-upload" class="w-full cursor-pointer bg-primary/10 text-primary font-bold py-3 rounded-xl hover:bg-primary/20 transition-all shadow-sm flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" /></svg>
                                    Seleccionar archivo
                                </label>
                                <input type="file" id="comprobante-upload" class="hidden">
                            </div>
                        </div>
                    `
                },
                reservaConfirmada: {
                    header: () => `<h1 class="title-text text-on-surface dark:text-dark-on-surface">¡Listo!</h1>`,
                    content: () => `
                        <div class="text-center flex flex-col items-center justify-center h-full">
                            <div class="w-24 h-24 flex items-center justify-center bg-positive/10 rounded-full mb-6">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-positive" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            </div>
                            <h2 class="text-2xl font-bold text-on-surface dark:text-dark-on-surface">Reservación Confirmada</h2>
                            <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm mt-6 text-left w-full">
                                <p class="body-text text-on-surface dark:text-dark-on-surface"><span class="font-semibold">Amenidad:</span> Salón de Usos Múltiples</p>
                                <p class="body-text text-on-surface dark:text-dark-on-surface mt-2"><span class="font-semibold">Fecha:</span> 15 de Julio, 2025</p>
                                <p class="body-text text-on-surface dark:text-dark-on-surface mt-2"><span class="font-semibold">Horario:</span> 16:00 - 18:00</p>
                            </div>
                            <button data-target="inicio" class="navigate-button mt-8 w-full max-w-xs mx-auto bg-primary text-white font-bold py-3 rounded-xl hover:bg-primary-dark transition-all">Volver al Inicio</button>
                        </div>
                    `
                },
                blogPost: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><div class="w-6"></div>`,
                    content: () => `
                        <div>
                            <img src="https://images.unsplash.com/photo-1548681528-6a5c45b66b42?q=80&w=1974&auto=format&fit=crop" class="w-full h-48 object-cover rounded-2xl mb-4">
                            <h1 class="text-3xl font-bold text-on-surface dark:text-dark-on-surface">Manejo de Mascotas en el Condominio</h1>
                            <p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant mt-2 mb-6">Por Administración | 2 de Julio, 2025</p>
                            <div class="space-y-4 body-text text-on-surface-variant dark:text-dark-on-surface-variant">
                                <p>Tener una mascota es una gran alegría, pero también una gran responsabilidad, especialmente cuando vivimos en comunidad. Para asegurar una convivencia armónica, es fundamental seguir algunas pautas sencillas.</p>
                                <p class="font-semibold text-on-surface dark:text-dark-on-surface">1. Correa en todo momento:</p>
                                <p>Dentro de las áreas comunes, tu mascota siempre debe ir con correa. Esto previene accidentes, peleas con otras mascotas y asegura que los vecinos que pueden sentirse incómodos o tener miedo se sientan seguros.</p>
                                <p class="font-semibold text-on-surface dark:text-dark-on-surface">2. Recoge sus desechos ¡siempre!:</p>
                                <p>Es la regla de oro. Lleva siempre contigo bolsas para recoger sus heces. Dejar los desechos en jardines o pasillos es un foco de infección y una falta de respeto hacia los demás.</p>
                            </div>
                        </div>
                    `
                },
                compartirQR: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Compartir QR</h1><div class="w-6"></div>`,
                    content: () => `<div class="text-center p-8"><p class="body-text text-on-surface dark:text-dark-on-surface">El código QR se ha copiado a tu portapapeles y está listo para ser compartido por WhatsApp, Messenger o Email.</p><button data-target="accesos" class="back-button mt-6 w-full max-w-xs mx-auto bg-primary text-white font-bold py-3 rounded-xl hover:bg-primary-dark transition-all">Entendido</button></div>`
                },
                infoPersonal: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Información Personal</h1><div class="w-6"></div>`,
                    content: () => `<div class="space-y-3"><div class="bg-surface dark:bg-dark-surface p-3 rounded-lg"><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">Nombre</p><p class="body-text text-on-surface dark:text-dark-on-surface">Carlos Alberto Guzmán Ríos</p></div><div class="bg-surface dark:bg-dark-surface p-3 rounded-lg"><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">Correo</p><p class="body-text text-on-surface dark:text-dark-on-surface">carlos.guzman@email.com</p></div><div class="bg-surface dark:bg-dark-surface p-3 rounded-lg"><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">Teléfono</p><p class="body-text text-on-surface dark:text-dark-on-surface">55 1234 5678</p></div><div class="bg-surface dark:bg-dark-surface p-3 rounded-lg"><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">Vehículo 1</p><p class="body-text text-on-surface dark:text-dark-on-surface">Jetta - Placas ABC-123</p></div></div>`
                },
                historialPagos: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Historial de Pagos</h1><div class="w-6"></div>`,
                    content: () => `<div class="space-y-3"><div class="bg-surface dark:bg-dark-surface p-4 rounded-xl flex justify-between items-center"><p class="body-text text-on-surface dark:text-dark-on-surface">Mantenimiento Junio</p><p class="body-text font-semibold text-positive">$1,550.00</p></div><div class="bg-surface dark:bg-dark-surface p-4 rounded-xl flex justify-between items-center"><p class="body-text text-on-surface dark:text-dark-on-surface">Mantenimiento Mayo</p><p class="body-text font-semibold text-positive">$1,550.00</p></div><div class="bg-surface dark:bg-dark-surface p-4 rounded-xl flex justify-between items-center"><p class="body-text text-on-surface dark:text-dark-on-surface">Cuota Extra Jardinería</p><p class="body-text font-semibold text-positive">$300.00</p></div><div class="bg-surface dark:bg-dark-surface p-4 rounded-xl flex justify-between items-center"><p class="body-text text-on-surface dark:text-dark-on-surface">Mantenimiento Abril</p><p class="body-text font-semibold text-positive">$1,550.00</p></div></div>`
                },
                 notificacionesSettings: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Notificaciones</h1><div class="w-6"></div>`,
                    content: () => `<div class="bg-surface dark:bg-dark-surface rounded-xl shadow-sm divide-y divide-gray-200 dark:divide-gray-700"><div class="flex justify-between items-center p-4"><label for="n-avisos" class="body-text text-on-surface dark:text-dark-on-surface">Nuevos avisos</label><input type="checkbox" id="n-avisos" class="toggle-checkbox" checked></div><div class="flex justify-between items-center p-4"><label for="n-pagos" class="body-text text-on-surface dark:text-dark-on-surface">Recordatorios de pago</label><input type="checkbox" id="n-pagos" class="toggle-checkbox" checked></div><div class="flex justify-between items-center p-4"><label for="n-paquetes" class="body-text text-on-surface dark:text-dark-on-surface">Llegada de paquetería</label><input type="checkbox" id="n-paquetes" class="toggle-checkbox" checked></div><div class="flex justify-between items-center p-4"><label for="n-visitas" class="body-text text-on-surface dark:text-dark-on-surface">Confirmación de visitas</label><input type="checkbox" id="n-visitas" class="toggle-checkbox"></div></div><style>.toggle-checkbox { height: 1.5rem; width: 2.75rem; appearance: none; background-color: #d1d5db; border-radius: 9999px; position: relative; transition: background-color 0.2s ease-in-out; cursor: pointer; } .dark .toggle-checkbox { background-color: #4A5568; } .toggle-checkbox:checked { background-color: #2196F3; } .toggle-checkbox::before { content: ''; position: absolute; top: 0.125rem; left: 0.125rem; height: 1.25rem; width: 1.25rem; background-color: white; border-radius: 9999px; transition: transform 0.2s ease-in-out; } .toggle-checkbox:checked::before { transform: translateX(1.25rem); }</style>`
                },
                formularioReporte: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Levantar Reporte</h1><div class="w-6"></div>`,
                    content: () => `
                        <div class="space-y-6">
                            <div><label for="report-category" class="subtitle-text text-on-surface dark:text-dark-on-surface mb-2 block">Categoría</label><select id="report-category" class="w-full p-3 body-text border border-gray-300 dark:border-gray-600 rounded-xl bg-surface dark:bg-dark-surface text-on-surface dark:text-dark-on-surface focus:ring-2 focus:ring-primary"><option>Queja</option><option>Sugerencia</option><option>Alerta de Seguridad</option><option>Falla en Instalaciones</option><option>Otro</option></select></div>
                            <div><label for="report-message" class="subtitle-text text-on-surface dark:text-dark-on-surface mb-2 block">Mensaje</label><textarea id="report-message" rows="6" class="w-full p-3 body-text border border-gray-300 dark:border-gray-600 rounded-xl bg-surface dark:bg-dark-surface text-on-surface dark:text-dark-on-surface focus:ring-2 focus:ring-primary" placeholder="Describe la situación con el mayor detalle posible..."></textarea></div>
                            <button class="w-full bg-primary text-white font-bold py-3 rounded-xl hover:bg-primary-dark transition-all shadow-lg">Enviar Reporte</button>
                        </div>
                    `
                },
                decalogo: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Decálogo del Buen Vecino</h1><div class="w-6"></div>`,
                    content: () => `
                        <ol class="list-decimal list-inside space-y-4 bg-surface dark:bg-dark-surface p-5 rounded-xl shadow-sm text-on-surface dark:text-dark-on-surface">
                            <li class="body-text">Respeta los horarios de descanso y evita ruidos molestos.</li>
                            <li class="body-text">Usa las áreas comunes de manera responsable y mantenlas limpias.</li>
                            <li class="body-text">Deposita la basura en su lugar, en bolsas cerradas y en los horarios establecidos.</li>
                            <li class="body-text">Si tienes mascotas, recoge sus desechos y llévalas siempre con correa.</li>
                            <li class="body-text">Estaciona tu vehículo únicamente en tu cajón asignado.</li>
                            <li class="body-text">Paga puntualmente tus cuotas de mantenimiento.</li>
                            <li class="body-text">Reporta cualquier falla o desperfecto a la administración.</li>
                            <li class="body-text">Conoce y respeta el reglamento interno del condominio.</li>
                            <li class="body-text">Participa en las asambleas y decisiones de la comunidad.</li>
                            <li class="body-text">Saluda y sé amable. Una buena relación vecinal empieza contigo.</li>
                        </ol>
                    `
                },
                blog: {
                     header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Blog Comunitario</h1><div class="w-6"></div>`,
                     content: () => `
                        <div class="space-y-4">
                            <button data-target="blogPost" class="navigate-button w-full text-left bg-surface dark:bg-dark-surface rounded-xl shadow-sm overflow-hidden"><img src="https://images.unsplash.com/photo-1548681528-6a5c45b66b42?q=80&w=1974&auto=format&fit=crop" class="w-full h-40 object-cover"><div class="p-4"><h3 class="subtitle-text text-on-surface dark:text-dark-on-surface">Manejo de Mascotas en el Condominio</h3><p class="caption-text mt-2 text-on-surface-variant dark:text-dark-on-surface-variant">Consejos para una convivencia feliz entre tu mascota y tus vecinos...</p></div></button>
                            <button data-target="blogPost" class="navigate-button w-full text-left bg-surface dark:bg-dark-surface rounded-xl shadow-sm overflow-hidden"><img src="https://images.unsplash.com/photo-1599059813005-11265ba4b4ce?q=80&w=2070&auto=format&fit=crop" class="w-full h-40 object-cover"><div class="p-4"><h3 class="subtitle-text text-on-surface dark:text-dark-on-surface">Guía para la Separación de Basura</h3><p class="caption-text mt-2 text-on-surface-variant dark:text-dark-on-surface-variant">Aprende cómo separar correctamente tus residuos y contribuir al medio ambiente...</p></div></button>
                        </div>
                     `
                },
            };

            function generateCalendar(date) {
                const container = document.getElementById('calendar-container');
                if (!container) return;

                const month = date.getMonth();
                const year = date.getFullYear();
                const firstDay = new Date(year, month, 1).getDay();
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                const monthNames = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];

                let html = `
                    <div class="flex justify-between items-center mb-4">
                        <button id="prev-month" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700"><svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd" /></svg></button>
                        <h3 class="font-semibold">${monthNames[month]} ${year}</h3>
                        <button id="next-month" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700"><svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" /></svg></button>
                    </div>
                    <div class="calendar-grid text-sm text-center font-medium text-gray-500">
                        <div>D</div><div>L</div><div>M</div><div>M</div><div>J</div><div>V</div><div>S</div>
                `;
                for (let i = 0; i < firstDay; i++) { html += `<div></div>`; }
                for (let i = 1; i <= daysInMonth; i++) {
                    const day = new Date(year, month, i);
                    const isToday = day.toDateString() === new Date().toDateString();
                    const isDisabled = day < new Date() && !isToday;
                    html += `<div class="calendar-day ${isToday ? 'today' : ''} ${isDisabled ? 'disabled' : ''}" data-date="${day.toISOString()}">${i}</div>`;
                }
                html += `</div>`;
                container.innerHTML = html;

                document.getElementById('prev-month').addEventListener('click', () => {
                    calendarDate.setMonth(calendarDate.getMonth() - 1);
                    generateCalendar(calendarDate);
                });
                document.getElementById('next-month').addEventListener('click', () => {
                    calendarDate.setMonth(calendarDate.getMonth() + 1);
                    generateCalendar(calendarDate);
                });
            }
            
            function navigateTo(screenName, fromHistory = false) {
                if (navigationTimeoutId) {
                    clearTimeout(navigationTimeoutId);
                }

                const screenData = screenContents[screenName];
                if (!screenData) return;

                const fromScreen = fromHistory ? navigationHistory[navigationHistory.length - 2] || 'inicio' : navigationHistory[navigationHistory.length - 1];
                
                if (!fromHistory) {
                    if (screenData.isMainTab) {
                        navigationHistory = [screenName];
                    } else {
                        navigationHistory.push(screenName);
                    }
                }

                appHeader.innerHTML = screenData.header(fromScreen);
                mainContent.innerHTML = screenData.content(fromScreen);
                mainContent.scrollTop = 0;

                appNav.style.display = screenData.isMainTab ? 'flex' : 'none';

                if (screenData.isMainTab) {
                    tabButtons.forEach(button => {
                        button.classList.toggle('active', button.dataset.target === screenName);
                    });
                }
                
                navigationTimeoutId = setTimeout(() => {
                    if (screenName === 'reservar') {
                        generateCalendar(calendarDate);
                    }
                    attachListeners();
                    navigationTimeoutId = null;
                }, 0);
            }

            function goBack() {
                if (navigationHistory.length > 1) {
                    navigationHistory.pop();
                    navigateTo(navigationHistory[navigationHistory.length - 1], true);
                }
            }
            
            function attachListeners() {
                document.querySelectorAll('.navigate-button').forEach(button => {
                    const target = button.dataset.target;
                    if(button.dataset.listenerAttached) return;
                    button.dataset.listenerAttached = 'true';
                    button.addEventListener('click', () => navigateTo(target));
                });
                document.querySelectorAll('.back-button').forEach(button => {
                     if(button.dataset.listenerAttached) return;
                    button.dataset.listenerAttached = 'true';
                    button.addEventListener('click', () => {
                        const target = button.dataset.target;
                        if (target && navigationHistory.includes(target)) {
                             const index = navigationHistory.indexOf(target);
                             navigationHistory = navigationHistory.slice(0, index + 1);
                             navigateTo(target, true);
                        } else {
                            goBack();
                        }
                    });
                });
                if (document.getElementById('logout-button')) {
                    const logoutBtn = document.getElementById('logout-button');
                    if(!logoutBtn.dataset.listenerAttached) {
                        logoutBtn.dataset.listenerAttached = 'true';
                        logoutBtn.addEventListener('click', () => {
                            appScreen.classList.remove('active');
                            loginScreen.classList.add('active');
                            navigationHistory = ['inicio'];
                        });
                    }
                }
                 if (document.getElementById('dark-mode-toggle')) {
                    const toggle = document.getElementById('dark-mode-toggle');
                    toggle.checked = document.documentElement.classList.contains('dark');
                    if(!toggle.dataset.listenerAttached) {
                        toggle.dataset.listenerAttached = 'true';
                        toggle.addEventListener('change', (e) => {
                            document.documentElement.classList.toggle('dark', e.target.checked);
                        });
                    }
                }
                 document.querySelectorAll('.copy-button').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const idToCopy = e.currentTarget.dataset.copy;
                        const textToCopy = document.getElementById(idToCopy).innerText;
                        
                        const textArea = document.createElement('textarea');
                        textArea.value = textToCopy;
                        document.body.appendChild(textArea);
                        textArea.select();
                        try {
                            document.execCommand('copy');
                            e.currentTarget.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-positive" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" /></svg>`;
                            setTimeout(() => {
                                e.currentTarget.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-on-surface-variant dark:text-dark-on-surface-variant" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>`;
                            }, 2000);
                        } catch (err) {
                            console.error('Fallback: Oops, unable to copy', err);
                        }
                        document.body.removeChild(textArea);
                    });
                });
                 document.querySelectorAll('.calendar-day:not(.disabled)').forEach(day => {
                    if(day.dataset.listenerAttached) return;
                    day.dataset.listenerAttached = 'true';
                    day.addEventListener('click', (e) => {
                        document.querySelectorAll('.calendar-day').forEach(d => d.classList.remove('selected'));
                        e.currentTarget.classList.add('selected');
                        document.getElementById('time-slot-container').classList.remove('hidden');
                    });
                });
                 document.querySelectorAll('.time-slot').forEach(slot => {
                     if(slot.dataset.listenerAttached) return;
                    slot.dataset.listenerAttached = 'true';
                    slot.addEventListener('click', (e) => {
                        if(e.currentTarget.disabled) return;
                        document.querySelectorAll('.time-slot').forEach(s => s.classList.remove('selected'));
                        e.currentTarget.classList.add('selected');
                    });
                });
            }

            loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                loginScreen.classList.remove('active');
                appScreen.classList.add('active');
                navigateTo('inicio');
            });

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    navigateTo(button.dataset.target);
                });
            });
        });
    </script>
</body>
</html>
