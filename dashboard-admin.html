<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conecta+ App Administrador</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'primary': '#2196F3',
                        'primary-dark': '#1976D2',
                        'positive': '#4CAF50',
                        'negative': '#F44336',
                        'warning': '#FFC107',
                        'background': '#F4F7FC',
                        'surface': '#FFFFFF',
                        'on-surface': '#1A202C',
                        'on-surface-variant': '#4A5568',
                        'dark-background': '#1A202C',
                        'dark-surface': '#2D3748',
                        'dark-on-surface': '#E0E0E0',
                        'dark-on-surface-variant': '#A0AEC0',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .mobile-frame {
            width: 100%;
            max-width: 420px;
            height: 90vh;
            max-height: 900px;
            border-radius: 36px;
            box-shadow: 0 20px 50px -10px rgba(0,0,0,0.2), 0 0 0 10px #1f2937;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        .screen { display: none; height: 100%; flex-direction: column; }
        .screen.active { display: flex; }
        .screen-content { flex-grow: 1; overflow-y: auto; padding: 24px; }
        .screen-content::-webkit-scrollbar { display: none; }
        .title-text { font-size: 22px; font-weight: 700; }
        .subtitle-text { font-size: 18px; font-weight: 600; }
        .body-text { font-size: 16px; font-weight: 500; }
        .caption-text { font-size: 14px; font-weight: 400; }
        .tab-button.active svg, .tab-button.active span { color: #2196F3; }
        .tab-button.active span { font-weight: 600; }
    </style>
</head>
<body class="bg-gray-800 flex items-center justify-center min-h-screen p-4">

    <div id="mobile-frame" class="mobile-frame bg-background dark:bg-dark-background">
        
        <div id="login-screen" class="screen active bg-gray-900">
            <div class="flex flex-col justify-center h-full p-8 text-white">
                <h1 class="text-4xl font-bold mb-2 text-center text-primary">Conecta+</h1>
                <p class="text-lg mb-8 text-center text-gray-400">Panel de Administrador</p>
                <form id="login-form" class="space-y-4">
                    <input type="email" placeholder="Correo de Administrador" class="w-full p-4 rounded-xl bg-gray-800 placeholder-gray-500 border border-gray-700 focus:outline-none focus:ring-2 focus:ring-primary" value="admin@torrealta.com">
                    <input type="password" placeholder="Contraseña" class="w-full p-4 rounded-xl bg-gray-800 placeholder-gray-500 border border-gray-700 focus:outline-none focus:ring-2 focus:ring-primary" value="••••••••">
                    <button type="submit" class="w-full bg-primary text-white font-bold py-4 rounded-xl hover:bg-primary-dark transition-all shadow-lg text-lg">
                        Acceder
                    </button>
                </form>
            </div>
        </div>

        <div id="app-screen" class="screen">
            <header id="app-header" class="p-4 flex justify-between items-center bg-surface dark:bg-dark-surface border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10">
            </header>
            
            <main id="main-content" class="screen-content bg-background dark:bg-dark-background relative">
            </main>

            <nav id="app-nav" class="bg-surface dark:bg-dark-surface border-t border-gray-200 dark:border-gray-700 p-2 shadow-inner mt-auto sticky bottom-0 z-10 flex justify-around items-center">
                <button data-target="dashboard" class="tab-button p-2 text-center text-on-surface-variant dark:text-dark-on-surface-variant active">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mx-auto" viewBox="0 0 20 20" fill="currentColor"><path d="M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z" /><path d="M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z" /></svg>
                    <span class="text-xs">Dashboard</span>
                </button>
                <button data-target="finanzas" class="tab-button p-2 text-center text-on-surface-variant dark:text-dark-on-surface-variant">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mx-auto" viewBox="0 0 20 20" fill="currentColor"><path d="M8.433 7.418c.158-.103.346-.196.567-.267v1.698a2.5 2.5 0 004 0V7.151c.22.071.41.164.567.267C13.863 8.248 14 8.614 14 9a2 2 0 11-4 0c0-.386.137-.752.433-1.582z" /><path fill-rule="evenodd" d="M7 2a1 1 0 011-1h4a1 1 0 011 1v1a1 1 0 01-1 1H8a1 1 0 01-1-1V2zm0 12.5A1.5 1.5 0 018.5 13h3a1.5 1.5 0 011.5 1.5v.5h-6v-.5z" clip-rule="evenodd" /></svg>
                    <span class="text-xs">Finanzas</span>
                </button>
                <button data-target="comunidad" class="tab-button p-2 text-center text-on-surface-variant dark:text-dark-on-surface-variant">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
                    <span class="text-xs">Comunidad</span>
                </button>
                <button data-target="directorios" class="tab-button p-2 text-center text-on-surface-variant dark:text-dark-on-surface-variant">
                     <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mx-auto" viewBox="0 0 20 20" fill="currentColor"><path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1zM3 16a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" /></svg>
                    <span class="text-xs">Directorios</span>
                </button>
                 <button data-target="soporte" class="tab-button p-2 text-center text-on-surface-variant dark:text-dark-on-surface-variant">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mx-auto" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5l-3 6a1 1 0 00.867 1.5h6a1 1 0 00.867-1.5l-3-6A1 1 0 0010 7zm0 4a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" /></svg>
                    <span class="text-xs">Soporte</span>
                </button>
            </nav>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mobileFrame = document.getElementById('mobile-frame');
            const loginForm = document.getElementById('login-form');
            const loginScreen = document.getElementById('login-screen');
            const appScreen = document.getElementById('app-screen');
            const tabButtons = document.querySelectorAll('.tab-button');
            const appHeader = document.getElementById('app-header');
            const mainContent = document.getElementById('main-content');
            const appNav = document.getElementById('app-nav');

            let navigationHistory = ['dashboard'];

            const screenContents = {
                dashboard: {
                    isMainTab: true,
                    header: () => `<h1 class="title-text text-on-surface dark:text-dark-on-surface">Dashboard</h1><button data-target="configuracion" class="navigate-button p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface-variant dark:text-dark-on-surface-variant" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg></button>`,
                    content: () => `
                        <div class="space-y-6">
                            <section class="grid grid-cols-2 gap-4">
                                <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-md"><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">Ingresos del Mes</p><p class="title-text text-positive mt-1">$85,200</p></div>
                                <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-md"><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">Gastos del Mes</p><p class="title-text text-negative mt-1">$32,500</p></div>
                                <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-md"><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">Saldo Actual</p><p class="title-text text-on-surface dark:text-dark-on-surface mt-1">$152,700</p></div>
                                <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-md"><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">% Morosidad</p><p class="title-text text-warning mt-1">18%</p></div>
                            </section>
                            <section class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-md">
                                <h2 class="subtitle-text text-on-surface dark:text-dark-on-surface mb-4">Actividad Reciente</h2>
                                <div class="space-y-3">
                                    <div class="flex justify-between items-center"><p class="body-text text-on-surface dark:text-dark-on-surface">Pago Depto. 301</p><p class="body-text text-positive font-semibold">+$1,550</p></div>
                                    <div class="flex justify-between items-center"><p class="body-text text-on-surface dark:text-dark-on-surface">Gasto Jardinería</p><p class="body-text text-negative font-semibold">-$2,800</p></div>
                                    <div class="flex justify-between items-center"><p class="body-text text-on-surface dark:text-dark-on-surface">Pago Depto. 102</p><p class="body-text text-positive font-semibold">+$1,550</p></div>
                                </div>
                            </section>
                        </div>
                    `
                },
                finanzas: {
                    isMainTab: true,
                    header: () => `<h1 class="title-text text-on-surface dark:text-dark-on-surface">Finanzas</h1>`,
                    content: () => `
                        <div class="space-y-4">
                             <div class="grid grid-cols-2 gap-2 bg-gray-200 dark:bg-gray-700 p-1 rounded-xl">
                                <button class="sub-tab-button active w-full p-2 text-sm font-semibold rounded-lg bg-surface dark:bg-dark-surface text-primary">Cobranza</button>
                                <button class="sub-tab-button w-full p-2 text-sm font-semibold rounded-lg text-on-surface-variant dark:text-dark-on-surface-variant">Egresos</button>
                            </div>
                            <input type="search" placeholder="Buscar residente por nombre o depto..." class="w-full p-3 body-text border border-gray-300 dark:border-gray-600 rounded-xl bg-surface dark:bg-dark-surface text-on-surface dark:text-dark-on-surface focus:ring-2 focus:ring-primary">
                            <div class="bg-surface dark:bg-dark-surface rounded-xl shadow-sm divide-y divide-gray-200 dark:divide-gray-700">
                                <div class="p-3 flex justify-between items-center"><div class="text-on-surface dark:text-dark-on-surface"><p class="font-semibold">Depto. 204 - Familia López</p><p class="text-sm text-on-surface-variant dark:text-dark-on-surface-variant">Saldo: $1,550.00</p></div><span class="text-xs font-bold text-white bg-negative px-2 py-1 rounded-full">Adeudo</span></div>
                                <div class="p-3 flex justify-between items-center"><div class="text-on-surface dark:text-dark-on-surface"><p class="font-semibold">Depto. 301 - Ana Torres</p><p class="text-sm text-on-surface-variant dark:text-dark-on-surface-variant">Saldo: $0.00</p></div><span class="text-xs font-bold text-white bg-positive px-2 py-1 rounded-full">Pagado</span></div>
                                <div class="p-3 flex justify-between items-center"><div class="text-on-surface dark:text-dark-on-surface"><p class="font-semibold">Depto. 102 - Marco Díaz</p><p class="text-sm text-on-surface-variant dark:text-dark-on-surface-variant">Saldo: $0.00</p></div><span class="text-xs font-bold text-white bg-positive px-2 py-1 rounded-full">Pagado</span></div>
                            </div>
                        </div>
                    `
                },
                comunidad: {
                    isMainTab: true,
                    header: () => `<h1 class="title-text text-on-surface dark:text-dark-on-surface">Comunidad</h1>`,
                    content: () => `
                        <div class="space-y-3">
                            <button data-target="bandejaEntrada" class="navigate-button w-full text-left bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm flex items-center justify-between"><span class="body-text font-semibold text-on-surface dark:text-dark-on-surface">Bandeja de Entrada</span><span class="bg-negative text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">3</span></button>
                            <button data-target="verReservaciones" class="navigate-button w-full text-left bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm flex items-center justify-between"><span class="body-text font-semibold text-on-surface dark:text-dark-on-surface">Ver Reservaciones</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                            <button data-target="enviarComunicado" class="navigate-button w-full text-left bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm flex items-center justify-between"><span class="body-text font-semibold text-on-surface dark:text-dark-on-surface">Enviar Comunicado</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                            <button data-target="gestionBlog" class="navigate-button w-full text-left bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm flex items-center justify-between"><span class="body-text font-semibold text-on-surface dark:text-dark-on-surface">Gestionar Contenido</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                        </div>
                    `
                },
                 directorios: {
                    isMainTab: true,
                    header: () => `<h1 class="title-text text-on-surface dark:text-dark-on-surface">Directorios</h1>`,
                    content: () => `
                        <div class="space-y-3">
                            <button data-target="dirResidentes" class="navigate-button w-full text-left bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm flex items-center justify-between"><span class="body-text font-semibold text-on-surface dark:text-dark-on-surface">Directorio de Residentes</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                            <button data-target="dirPersonal" class="navigate-button w-full text-left bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm flex items-center justify-between"><span class="body-text font-semibold text-on-surface dark:text-dark-on-surface">Directorio de Personal</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                        </div>
                    `
                },
                soporte: {
                    isMainTab: true,
                    header: () => `<h1 class="title-text text-on-surface dark:text-dark-on-surface">Soporte y Ayuda</h1>`,
                    content: () => `
                        <div class="space-y-3">
                            <button data-target="manualUsuario" class="navigate-button w-full text-left bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm flex items-center justify-between"><span class="body-text font-semibold text-on-surface dark:text-dark-on-surface">Manual de Usuario</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                            <button data-target="contactoSoporte" class="navigate-button w-full text-left bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm flex items-center justify-between"><span class="body-text font-semibold text-on-surface dark:text-dark-on-surface">Contactar a Soporte Técnico</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                        </div>
                    `
                },
                bandejaEntrada: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Bandeja de Entrada</h1><div class="w-6"></div>`,
                    content: () => `
                        <div class="space-y-3">
                            <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm"><div class="flex justify-between items-start"><p class="font-semibold text-on-surface dark:text-dark-on-surface">Falla en portón eléctrico</p><span class="text-xs font-bold text-white bg-warning px-2 py-1 rounded-full">Alerta</span></div><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant mt-1">Depto. 502: "El portón del estacionamiento no está cerrando bien..."</p></div>
                            <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm"><div class="flex justify-between items-start"><p class="font-semibold text-on-surface dark:text-dark-on-surface">Ruido excesivo</p><span class="text-xs font-bold text-white bg-negative px-2 py-1 rounded-full">Queja</span></div><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant mt-1">Depto. 104: "Mi vecino del 204 tiene la música muy alta..."</p></div>
                            <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm"><div class="flex justify-between items-start"><p class="font-semibold text-on-surface dark:text-dark-on-surface">Sugerencia para jardín</p><span class="text-xs font-bold text-white bg-blue-400 px-2 py-1 rounded-full">Sugerencia</span></div><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant mt-1">Depto. 303: "Podríamos poner más flores en la entrada principal..."</p></div>
                        </div>
                    `
                },
                verReservaciones: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Reservaciones</h1><div class="w-6"></div>`,
                    content: () => `
                        <div class="space-y-3">
                            <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm"><p class="font-semibold text-on-surface dark:text-dark-on-surface">Salón de Usos Múltiples</p><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant mt-1">Reservado por: Depto 401 - Familia Pérez</p><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">Fecha: Hoy, 18:00 - 22:00</p></div>
                            <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm"><p class="font-semibold text-on-surface dark:text-dark-on-surface">Cancha de Pádel</p><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant mt-1">Reservado por: Depto 102 - Marco Díaz</p><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">Fecha: Mañana, 09:00 - 10:00</p></div>
                        </div>
                    `
                },
                enviarComunicado: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Enviar Comunicado</h1><div class="w-6"></div>`,
                    content: () => `
                        <div class="space-y-6">
                            <div><label for="comunicado-title" class="subtitle-text text-on-surface dark:text-dark-on-surface mb-2 block">Título</label><input type="text" id="comunicado-title" class="w-full p-3 body-text border border-gray-300 dark:border-gray-600 rounded-xl bg-surface dark:bg-dark-surface text-on-surface dark:text-dark-on-surface focus:ring-2 focus:ring-primary" placeholder="Ej. Recordatorio de Asamblea"></div>
                            <div><label for="comunicado-message" class="subtitle-text text-on-surface dark:text-dark-on-surface mb-2 block">Mensaje</label><textarea id="comunicado-message" rows="8" class="w-full p-3 body-text border border-gray-300 dark:border-gray-600 rounded-xl bg-surface dark:bg-dark-surface text-on-surface dark:text-dark-on-surface focus:ring-2 focus:ring-primary" placeholder="Escribe aquí el contenido del comunicado para todos los residentes..."></textarea></div>
                            <button class="w-full bg-primary text-white font-bold py-3 rounded-xl hover:bg-primary-dark transition-all shadow-lg">Enviar a Todos</button>
                        </div>
                    `
                },
                gestionBlog: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Gestionar Contenido</h1><div class="w-6"></div>`,
                    content: () => `
                        <div class="space-y-4">
                            <button data-target="crearBlog" class="navigate-button w-full bg-positive text-white font-bold py-3 rounded-xl hover:bg-green-600 transition-all shadow-lg flex items-center justify-center text-lg"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6m0 0v6m0-6h6m-6 0H6" /></svg>Crear Nuevo Artículo</button>
                            <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm"><p class="font-semibold text-on-surface dark:text-dark-on-surface">Decálogo del Buen Vecino</p><div class="flex gap-2 mt-2"><button data-target="editarBlog" class="navigate-button text-xs bg-gray-200 dark:bg-gray-600 px-3 py-1 rounded-md">Editar</button><button class="text-xs bg-negative/20 text-negative px-3 py-1 rounded-md">Eliminar</button></div></div>
                            <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm"><p class="font-semibold text-on-surface dark:text-dark-on-surface">Manejo de Mascotas en el Condominio</p><div class="flex gap-2 mt-2"><button data-target="editarBlog" class="navigate-button text-xs bg-gray-200 dark:bg-gray-600 px-3 py-1 rounded-md">Editar</button><button class="text-xs bg-negative/20 text-negative px-3 py-1 rounded-md">Eliminar</button></div></div>
                            <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm"><p class="font-semibold text-on-surface dark:text-dark-on-surface">Guía para la Separación de Basura</p><div class="flex gap-2 mt-2"><button data-target="editarBlog" class="navigate-button text-xs bg-gray-200 dark:bg-gray-600 px-3 py-1 rounded-md">Editar</button><button class="text-xs bg-negative/20 text-negative px-3 py-1 rounded-md">Eliminar</button></div></div>
                        </div>
                    `
                },
                crearBlog: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Nueva Entrada de Blog</h1><div class="w-6"></div>`,
                    content: () => `
                        <div class="space-y-6">
                            <div><label for="blog-title" class="subtitle-text text-on-surface dark:text-dark-on-surface mb-2 block">Título del Artículo</label><input type="text" id="blog-title" class="w-full p-3 body-text border border-gray-300 dark:border-gray-600 rounded-xl bg-surface dark:bg-dark-surface text-on-surface dark:text-dark-on-surface focus:ring-2 focus:ring-primary"></div>
                            <div><label for="blog-image" class="subtitle-text text-on-surface dark:text-dark-on-surface mb-2 block">Imagen de Portada</label><label for="blog-image-upload" class="w-full cursor-pointer bg-gray-100 dark:bg-gray-700 text-on-surface-variant dark:text-dark-on-surface-variant font-semibold py-3 rounded-xl hover:bg-gray-200 transition-all shadow-sm flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" /></svg>Seleccionar Imagen</label><input type="file" id="blog-image-upload" class="hidden"></div>
                            <div><label for="blog-message" class="subtitle-text text-on-surface dark:text-dark-on-surface mb-2 block">Contenido</label><textarea id="blog-message" rows="10" class="w-full p-3 body-text border border-gray-300 dark:border-gray-600 rounded-xl bg-surface dark:bg-dark-surface text-on-surface dark:text-dark-on-surface focus:ring-2 focus:ring-primary"></textarea></div>
                            <button class="w-full bg-positive text-white font-bold py-3 rounded-xl hover:bg-green-600 transition-all shadow-lg">Publicar Artículo</button>
                        </div>
                    `
                },
                editarBlog: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Editar Entrada</h1><div class="w-6"></div>`,
                    content: () => `
                        <div class="space-y-6">
                            <div><label for="blog-title-edit" class="subtitle-text text-on-surface dark:text-dark-on-surface mb-2 block">Título del Artículo</label><input type="text" id="blog-title-edit" class="w-full p-3 body-text border border-gray-300 dark:border-gray-600 rounded-xl bg-surface dark:bg-dark-surface text-on-surface dark:text-dark-on-surface focus:ring-2 focus:ring-primary" value="Manejo de Mascotas en el Condominio"></div>
                            <div><label for="blog-image-edit" class="subtitle-text text-on-surface dark:text-dark-on-surface mb-2 block">Imagen de Portada</label><label for="blog-image-upload-edit" class="w-full cursor-pointer bg-gray-100 dark:bg-gray-700 text-on-surface-variant dark:text-dark-on-surface-variant font-semibold py-3 rounded-xl hover:bg-gray-200 transition-all shadow-sm flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" /></svg>Cambiar Imagen</label><input type="file" id="blog-image-upload-edit" class="hidden"></div>
                            <div><label for="blog-message-edit" class="subtitle-text text-on-surface dark:text-dark-on-surface mb-2 block">Contenido</label><textarea id="blog-message-edit" rows="10" class="w-full p-3 body-text border border-gray-300 dark:border-gray-600 rounded-xl bg-surface dark:bg-dark-surface text-on-surface dark:text-dark-on-surface focus:ring-2 focus:ring-primary">Tener una mascota es una gran alegría, pero también una gran responsabilidad...</textarea></div>
                            <button class="w-full bg-primary text-white font-bold py-3 rounded-xl hover:bg-primary-dark transition-all shadow-lg">Guardar Cambios</button>
                        </div>
                    `
                },
                dirResidentes: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Directorio de Residentes</h1><div class="w-6"></div>`,
                    content: () => `
                        <div class="space-y-3">
                            <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm"><p class="font-semibold text-on-surface dark:text-dark-on-surface">Depto. 101 - Carlos Guzmán</p><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant mt-1">Tel: 55 1234 5678</p></div>
                            <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm"><p class="font-semibold text-on-surface dark:text-dark-on-surface">Depto. 102 - Marco Díaz</p><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant mt-1">Tel: 55 8765 4321</p></div>
                        </div>
                    `
                },
                dirPersonal: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Directorio de Personal</h1><div class="w-6"></div>`,
                    content: () => `
                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm text-center"><img src="https://i.pravatar.cc/150?img=3" class="w-20 h-20 rounded-full mx-auto mb-3"><p class="font-semibold text-on-surface dark:text-dark-on-surface">José Luis</p><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">Seguridad (Turno A)</p></div>
                            <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm text-center"><img src="https://i.pravatar.cc/150?img=4" class="w-20 h-20 rounded-full mx-auto mb-3"><p class="font-semibold text-on-surface dark:text-dark-on-surface">Ricardo Mendoza</p><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">Seguridad (Turno B)</p></div>
                            <div class="bg-surface dark:bg-dark-surface p-4 rounded-xl shadow-sm text-center"><img src="https://i.pravatar.cc/150?img=5" class="w-20 h-20 rounded-full mx-auto mb-3"><p class="font-semibold text-on-surface dark:text-dark-on-surface">María García</p><p class="caption-text text-on-surface-variant dark:text-dark-on-surface-variant">Limpieza</p></div>
                        </div>
                    `
                },
                manualUsuario: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Manual de Usuario</h1><div class="w-6"></div>`,
                    content: () => `
                        <div class="space-y-4 text-on-surface-variant dark:text-dark-on-surface-variant">
                            <h2 class="subtitle-text text-on-surface dark:text-dark-on-surface">¿Cómo registrar un gasto?</h2>
                            <p>Ve a la pestaña 'Finanzas', selecciona 'Egresos' y presiona el botón '+' para añadir un nuevo gasto con su comprobante.</p>
                             <h2 class="subtitle-text text-on-surface dark:text-dark-on-surface pt-4">¿Cómo ver el estado de un residente?</h2>
                            <p>Ve a la pestaña 'Finanzas', selecciona 'Cobranza' y utiliza la barra de búsqueda para encontrar al residente.</p>
                        </div>
                    `
                },
                contactoSoporte: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Contactar a Soporte</h1><div class="w-6"></div>`,
                    content: () => `
                        <div class="space-y-6">
                            <div><label for="support-subject" class="subtitle-text text-on-surface dark:text-dark-on-surface mb-2 block">Asunto</label><input type="text" id="support-subject" class="w-full p-3 body-text border border-gray-300 dark:border-gray-600 rounded-xl bg-surface dark:bg-dark-surface text-on-surface dark:text-dark-on-surface focus:ring-2 focus:ring-primary"></div>
                            <div><label for="support-message" class="subtitle-text text-on-surface dark:text-dark-on-surface mb-2 block">Describe tu problema</label><textarea id="support-message" rows="8" class="w-full p-3 body-text border border-gray-300 dark:border-gray-600 rounded-xl bg-surface dark:bg-dark-surface text-on-surface dark:text-dark-on-surface focus:ring-2 focus:ring-primary"></textarea></div>
                            <button class="w-full bg-primary text-white font-bold py-3 rounded-xl hover:bg-primary-dark transition-all shadow-lg">Enviar Mensaje</button>
                        </div>
                    `
                },
                 configuracion: {
                     header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Configuración</h1><div class="w-6"></div>`,
                     content: () => `
                        <div class="bg-surface dark:bg-dark-surface rounded-xl shadow-sm divide-y divide-gray-200 dark:divide-gray-700">
                           <div class="flex justify-between items-center p-4">
                                <span class="body-text text-on-surface dark:text-dark-on-surface">Modo Oscuro</span>
                                <input type="checkbox" id="dark-mode-toggle" class="toggle-checkbox">
                           </div>
                           <button data-target="notificacionesSettings" class="navigate-button w-full flex items-center justify-between p-4"><span class="body-text text-on-surface dark:text-dark-on-surface">Notificaciones</span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg></button>
                        </div>
                        <style>.toggle-checkbox { height: 1.5rem; width: 2.75rem; appearance: none; background-color: #d1d5db; border-radius: 9999px; position: relative; transition: background-color 0.2s ease-in-out; cursor: pointer; } .dark .toggle-checkbox { background-color: #4A5568; } .toggle-checkbox:checked { background-color: #2196F3; } .toggle-checkbox::before { content: ''; position: absolute; top: 0.125rem; left: 0.125rem; height: 1.25rem; width: 1.25rem; background-color: white; border-radius: 9999px; transition: transform 0.2s ease-in-out; } .toggle-checkbox:checked::before { transform: translateX(1.25rem); }</style>
                     `
                },
                 notificacionesSettings: {
                    header: (from) => `<button data-target="${from}" class="back-button p-2 -ml-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-on-surface dark:text-dark-on-surface" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg></button><h1 class="title-text text-on-surface dark:text-dark-on-surface">Notificaciones</h1><div class="w-6"></div>`,
                    content: () => `<div class="bg-surface dark:bg-dark-surface rounded-xl shadow-sm divide-y divide-gray-200 dark:divide-gray-700"><div class="flex justify-between items-center p-4"><label for="n-avisos" class="body-text text-on-surface dark:text-dark-on-surface">Nuevos reportes de vecinos</label><input type="checkbox" id="n-avisos" class="toggle-checkbox" checked></div><div class="flex justify-between items-center p-4"><label for="n-pagos" class="body-text text-on-surface dark:text-dark-on-surface">Confirmaciones de pago</label><input type="checkbox" id="n-pagos" class="toggle-checkbox" checked></div><div class="flex justify-between items-center p-4"><label for="n-reservas" class="body-text text-on-surface dark:text-dark-on-surface">Nuevas reservaciones</label><input type="checkbox" id="n-reservas" class="toggle-checkbox"></div></div><style>.toggle-checkbox { height: 1.5rem; width: 2.75rem; appearance: none; background-color: #d1d5db; border-radius: 9999px; position: relative; transition: background-color 0.2s ease-in-out; cursor: pointer; } .dark .toggle-checkbox { background-color: #4A5568; } .toggle-checkbox:checked { background-color: #2196F3; } .toggle-checkbox::before { content: ''; position: absolute; top: 0.125rem; left: 0.125rem; height: 1.25rem; width: 1.25rem; background-color: white; border-radius: 9999px; transition: transform 0.2s ease-in-out; } .toggle-checkbox:checked::before { transform: translateX(1.25rem); }</style>`
                },
            };

            function navigateTo(screenName, fromHistory = false) {
                const screenData = screenContents[screenName];
                if (!screenData) return;

                const fromScreen = fromHistory ? navigationHistory[navigationHistory.length - 2] || 'dashboard' : navigationHistory[navigationHistory.length - 1];
                
                if (!fromHistory) {
                    if (screenData.isMainTab) {
                        navigationHistory = [screenName];
                    } else {
                        navigationHistory.push(screenName);
                    }
                }

                appHeader.innerHTML = screenData.header(fromScreen);
                mainContent.innerHTML = screenData.content(fromScreen);
                mainContent.scrollTop = 0;

                appNav.style.display = screenData.isMainTab ? 'flex' : 'none';

                if (screenData.isMainTab) {
                    tabButtons.forEach(button => {
                        button.classList.toggle('active', button.dataset.target === screenName);
                    });
                }
                
                attachListeners();
            }

            function goBack() {
                if (navigationHistory.length > 1) {
                    navigationHistory.pop();
                    navigateTo(navigationHistory[navigationHistory.length - 1], true);
                }
            }
            
            function attachListeners() {
                document.querySelectorAll('.navigate-button').forEach(button => {
                    const target = button.dataset.target;
                    if(button.dataset.listenerAttached) return;
                    button.dataset.listenerAttached = 'true';
                    button.addEventListener('click', () => navigateTo(target));
                });
                document.querySelectorAll('.back-button').forEach(button => {
                     if(button.dataset.listenerAttached) return;
                    button.dataset.listenerAttached = 'true';
                    button.addEventListener('click', () => {
                        const target = button.dataset.target;
                        if (target && navigationHistory.includes(target)) {
                             const index = navigationHistory.indexOf(target);
                             navigationHistory = navigationHistory.slice(0, index + 1);
                             navigateTo(target, true);
                        } else {
                            goBack();
                        }
                    });
                });
                if (document.getElementById('logout-button')) {
                    const logoutBtn = document.getElementById('logout-button');
                    if(!logoutBtn.dataset.listenerAttached) {
                        logoutBtn.dataset.listenerAttached = 'true';
                        logoutBtn.addEventListener('click', () => {
                            appScreen.classList.remove('active');
                            loginScreen.classList.add('active');
                            navigationHistory = ['dashboard'];
                        });
                    }
                }
                 if (document.getElementById('dark-mode-toggle')) {
                    const toggle = document.getElementById('dark-mode-toggle');
                    toggle.checked = document.documentElement.classList.contains('dark');
                    if(!toggle.dataset.listenerAttached) {
                        toggle.dataset.listenerAttached = 'true';
                        toggle.addEventListener('change', (e) => {
                            document.documentElement.classList.toggle('dark', e.target.checked);
                        });
                    }
                }
            }

            loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                loginScreen.classList.remove('active');
                appScreen.classList.add('active');
                navigateTo('dashboard');
            });

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    navigateTo(button.dataset.target);
                });
            });
        });
    </script>
</body>
</html>
